<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Ajar - Sahabat Quran</title>
    <link rel="stylesheet" href="pengajar.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <div class="logo">
                <img src="logoYSQ.png" alt="Logo Sahabat Quran">
            </div>
            <nav>
                <ul>
                    <li><a href="dashboard-pengajar.html" class="nav-link"><i class="fas fa-th-large"></i> <span>Dashboard</span></a></li>
                    <li><a href="jadwal-kelas-pengajar.html" class="nav-link"><i class="fas fa-calendar-alt"></i> <span>Jadwal Kelas</span></a></li>
                    <li><a href="absensi-pengajar.html" class="nav-link"><i class="fas fa-check-square"></i> <span>Absensi</span></a></li>
                    <li class="active"><a href="materi-ajar.html" class="nav-link"><i class="fas fa-book"></i> <span>Materi Ajar</span></a></li>
                    <li><a href="rapor-santri.html" class="nav-link"><i class="fas fa-file-alt"></i> <span>Rapor</span></a></li>
                    <li><a href="laporan-pengajar.html" class="nav-link"><i class="fas fa-chart-bar"></i> <span>Laporan</span></a></li>
                </ul>
            </nav>
            <div class="sidebar-footer">
                <ul>
                    <li onclick="openProfil()" style="cursor: pointer;"><i class="fas fa-user-cog"></i> <span>Profil Pengajar</span></li>
                    <li class="logout"><i class="fas fa-sign-out-alt"></i> <span>Keluar</span></li>
                </ul>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-header">
                <h1 class="page-title">Materi Ajar</h1>
                <div class="user-profile">
                    <span id="tanggal-otomatis" class="date-display-box"></span>
                </div>
            </header>

            <section class="sqm-materi-bar">
                <div class="sqm-filter-group">
                    <div class="sqm-filter-item">
                        <label><i class="fas fa-calendar-alt"></i> Pilih Tanggal</label>
                        <input type="date" id="filterTanggal" class="sqm-input-box">
                    </div>
                    <div class="sqm-filter-item sqm-separator">
                        <label><i class="fas fa-desktop"></i> Pilih Kelas (Sesuai Jadwal)</label>
                        <select id="filterKelas" class="sqm-input-box">
                            <option value="" disabled selected>- Pilih Tanggal Dulu -</option>
                            <option value="Usmani 1">Usmani 1</option>
                            <option value="Tajwid Dasar">Tajwid Dasar</option>
                        </select>
                    </div>
                </div>
                <div class="sqm-btn-group">
                    <button class="sqm-btn-base sqm-btn-gold" onclick="openMateriModal()">
                        <i class="fas fa-folder-plus"></i> Tambah Materi Baru
                    </button>
                </div>
            </section>

            <div class="table-container">
                <table class="table-materi">
                    <thead>
                        <tr>
                            <th style="width: 50px;">No</th>
                            <th>Judul Materi</th>
                            <th>Konten</th>
                            <th>Tanggal Upload</th>
                            <th style="width: 150px;">Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="main-row" onclick="toggleRow(this)">
                            <td>1</td>
                            <td style="text-align: left; padding-left: 20px;">Makharijul Huruf</td>
                            <td>
                                <i class="fas fa-file-pdf" title="Materi PDF"></i>
                                <i class="fas fa-tasks" title="Ada Tugas" style="margin-left: 8px; color: #c5a059;"></i>
                            </td>
                            <td>30 Des 2025</td>
                            <td><button class="link-action"><i class="fas fa-eye"></i> Detail</button></td>
                        </tr>
                        <tr class="expandable-row" style="display: none;">
                            <td colspan="5">
                                <div class="expand-content">
                                    <div class="detail-section materi-box">
                                        <div class="detail-header-task">
                                            <h4><i class="fas fa-book-open"></i> Ringkasan Materi</h4>
                                            <button class="btn-edit-tugas" onclick="openMateriModal()"><i class="fas fa-edit"></i> Edit</button>
                                        </div>
                                        <div class="detail-grid-layout">
                                            <div class="col-instruksi">
                                                <div class="instruction-box full-height">
                                                    <p>Pelajari letak keluarnya huruf (makhraj) Al-Halq dan Al-Lisyan. Fokus pada pelafalan huruf tenggorokan.</p>
                                                </div>
                                            </div>
                                            <div class="col-meta">
                                                <div class="meta-card"><label>Modul:</label><a href="#" class="file-link"><i class="fas fa-file-pdf"></i> materi_makharij.pdf</a></div>
                                                <div class="meta-card"><label>Video:</label><a href="#" class="file-link video-style"><i class="fab fa-youtube"></i> Lihat Tutorial</a></div>
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="detail-divider">

                                    <div class="detail-section tugas-box">
                                        <div class="detail-header-task">
                                            <h4><i class="fas fa-tasks"></i> Tugas Terkait</h4>
                                            <button class="sqm-btn-base sqm-btn-outline" style="padding: 5px 12px; font-size: 12px;" onclick="openTaskModal()">
                                                <i class="fas fa-plus"></i> Tambah Tugas
                                            </button>
                                        </div>
                                        <div class="detail-grid-layout">
                                            <div class="col-instruksi">
                                                <label>Instruksi Tugas:</label>
                                                <div class="instruction-box full-height"><p>Setorkan rekaman suara pelafalan huruf hijaiyah dari Alif sampai Kho.</p></div>
                                            </div>
                                            <div class="col-meta">
                                                <div class="meta-card"><label>Deadline:</label><div class="value deadline-text">31 Des 2025</div></div>
                                                <div class="meta-card"><label>Lampiran Tugas:</label><a href="#" class="file-link"><i class="fas fa-file-download"></i> panduan_tugas.pdf</a></div>
                                                <button class="btn-status-santri" onclick="openStatusSantriModal()">
                                                    <i class="fas fa-users"></i> Status Pengerjaan Santri
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <div id="modalBuatMateri" class="sqm-modal-overlay">
        <div class="sqm-modal-card">
            <div class="sqm-modal-header">
                <h3>Tambah Materi Baru</h3>
                <span class="sqm-close-icon" onclick="closeAllModals()">&times;</span>
            </div>
            <div class="sqm-modal-body">
                <div class="sqm-grid-layout">
                    <div class="sqm-form-group sqm-full-width"><label>Judul Materi</label><input type="text" id="materiTitle" class="sqm-field"></div>
                    <div class="sqm-form-group sqm-full-width"><label>Ringkasan</label><textarea id="materiDesc" class="sqm-field sqm-textarea"></textarea></div>
                    <div class="sqm-form-group sqm-full-width"><label>Upload Modul</label><input type="file" class="sqm-field-file"></div>
                </div>
            </div>
            <div class="sqm-modal-footer">
                <button class="sqm-btn-cancel" onclick="closeAllModals()">Batal</button>
                <button class="sqm-btn-save" onclick="handleSimpanMateri()">Simpan Materi</button>
            </div>
        </div>
    </div>

    <div id="modalBuatTugas" class="sqm-modal-overlay">
        <div class="sqm-modal-card">
            <div class="sqm-modal-header">
                <h3>Buat Tugas Baru</h3>
                <span class="sqm-close-icon" onclick="closeAllModals()">&times;</span>
            </div>
            <div class="sqm-modal-body">
                <div class="sqm-grid-layout">
                    <div class="sqm-form-group sqm-full-width"><label>Instruksi Tugas</label><textarea id="taskDesc" class="sqm-field sqm-textarea"></textarea></div>
                    <div class="sqm-form-group"><label>Batas Tanggal</label><input type="date" class="sqm-field"></div>
                    <div class="sqm-form-group"><label>Lampiran Tugas</label><input type="file" class="sqm-field-file"></div>
                </div>
            </div>
            <div class="sqm-modal-footer">
                <button class="sqm-btn-cancel" onclick="closeAllModals()">Batal</button>
                <button class="sqm-btn-save" onclick="handleSimpanTugas()">Simpan Tugas</button>
            </div>
        </div>
    </div>

    <div id="modalStatusSantri" class="sqm-modal-overlay">
        <div class="sqm-modal-card" style="max-width: 800px;">
            <div class="sqm-modal-header">
                <h3>Status Pengerjaan Santri</h3>
                <span class="sqm-close-icon" onclick="closeAllModals()">&times;</span>
            </div>
            <div class="sqm-modal-body">
                <table class="table-absensi-santri">
                    <thead><tr><th>No</th><th>Nama Santri</th><th>Status</th><th>Aksi</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td>Ahmad Fauzi</td><td><span class="badge-status success">Sudah Setor</span></td><td><button class="btn-edit-tugas" onclick="openReviewModal('Ahmad Fauzi')">Periksa</button></td></tr>
                        <tr><td>2</td><td>Siti Aminah</td><td><span class="badge-status warning">Belum Setor</span></td><td><button class="btn-edit-tugas" style="color: #2d5a3f;" onclick="hubungiSantri('Siti Aminah')"><i class="fab fa-whatsapp"></i> Hubungi</button></td></tr>
                    </tbody>
                </table>
            </div>
            <div class="sqm-modal-footer">
                <button class="sqm-btn-save" onclick="closeAllModals()">Tutup</button>
            </div>
        </div>
    </div>

    <div id="modalReviewTugas" class="sqm-modal-overlay">
        <div class="sqm-modal-card">
            <div class="sqm-modal-header">
                <div class="sqm-header-info">
                    <h3><i class="fas fa-search"></i> Periksa Tugas Santri</h3>
                    <p id="reviewNamaSantri">Nama Santri: -</p>
                </div>
                <span class="sqm-close-icon" onclick="closeReviewModal()">&times;</span>
            </div>
            <div class="sqm-modal-body">
                <div class="sqm-grid-layout">
                    <div class="sqm-form-group">
                        <label>Hasil Setoran Santri:</label>
                        <div id="previewKontenSantri" class="instruction-box" style="text-align: center; min-height: 150px; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                        </div>
                    </div>
                    <div class="sqm-form-group">
                        <label>Input Nilai (0-100):</label>
                        <input type="number" id="inputNilai" class="sqm-field">
                        <label style="margin-top: 10px;">Catatan:</label>
                        <textarea id="catatanFeedback" class="sqm-field sqm-textarea"></textarea>
                    </div>
                </div>
            </div>
            <div class="sqm-modal-footer">
                <button class="sqm-btn-cancel" onclick="closeReviewModal()">Batal</button>
                <button class="sqm-btn-save" onclick="simpanPenilaian()">Simpan Nilai</button>
            </div>
        </div>
    </div>

    <div id="toastNotification" class="toast"></div>
    <script src="pengajar.js"></script>
</body>
</html>